/**
 * Generated by DotNetORb.IdlCompiler V 1.0.0.0
 * Timestamp: 25/02/2024 9:49:37
 *
 */

using System;
using System.Collections.Generic;
using System.Linq;
using CORBA;


namespace DotNetOrb.ImR
{

	public abstract class RegistrationPOA: PortableServer.Servant, CORBA.IInvokeHandler, IRegistrationOperations
	{
		static private Dictionary<string,int> _opsDict = new Dictionary<string,int>();
		static RegistrationPOA()
		{
			_opsDict.Add("register_host", 0);
			_opsDict.Add("set_server_down", 1);
			_opsDict.Add("register_poa", 2);
			_opsDict.Add("get_imr_info", 3);
		}
		private string[] _ids = {"IDL:DotNetOrb/ImR/Registration:1.0"};

		[IdlName("register_host")]
		[ThrowsIdlException(typeof(DotNetOrb.ImR.Registration.IllegalHostName))]
		[ThrowsIdlException(typeof(DotNetOrb.ImR.Registration.InvalidSSDRef))]
		public abstract void RegisterHost(DotNetOrb.ImR.HostInfo info);
		[IdlName("set_server_down")]
		[ThrowsIdlException(typeof(DotNetOrb.ImR.UnknownServerName))]
		public abstract void SetServerDown([WideChar(false)] string name);
		[IdlName("register_poa")]
		[ThrowsIdlException(typeof(DotNetOrb.ImR.Registration.IllegalPOAName))]
		[ThrowsIdlException(typeof(DotNetOrb.ImR.Registration.DuplicatePOAName))]
		[ThrowsIdlException(typeof(DotNetOrb.ImR.UnknownServerName))]
		public abstract void RegisterPoa([WideChar(false)] string name, [WideChar(false)] string server, [WideChar(false)] string host, uint port);
		[IdlName("get_imr_info")]
		public abstract DotNetOrb.ImR.ImRInfo GetImrInfo();

		public override string[] _AllInterfaces(PortableServer.IPOA poa, byte[] objId)
		{
			return _ids;
		}

		public virtual DotNetOrb.ImR.IRegistration _This()
		{
			return DotNetOrb.ImR.RegistrationHelper.Narrow(_ThisObject());
		}

		public virtual DotNetOrb.ImR.IRegistration _This(CORBA.ORB orb)
		{
			return DotNetOrb.ImR.RegistrationHelper.Narrow(_ThisObject(orb));
		}

		public CORBA.IOutputStream _Invoke(string method, CORBA.IInputStream inputStream, CORBA.IResponseHandler handler)
		{
			CORBA.IOutputStream outputStream = null;
			int opIndex;
			if (_opsDict.TryGetValue(method, out opIndex))
			{
				switch (opIndex)
				{
					case 0:
					{
						try
						{
							DotNetOrb.ImR.HostInfo info;
							info = DotNetOrb.ImR.HostInfoHelper.Read(inputStream);
							outputStream = handler.CreateReply();
							RegisterHost(info);
						}
						catch(DotNetOrb.ImR.Registration.IllegalHostName ex)
						{
							outputStream = handler.CreateExceptionReply();
							DotNetOrb.ImR.Registration.IllegalHostNameHelper.Write(outputStream, ex);
						}
						catch(DotNetOrb.ImR.Registration.InvalidSSDRef ex)
						{
							outputStream = handler.CreateExceptionReply();
							DotNetOrb.ImR.Registration.InvalidSSDRefHelper.Write(outputStream, ex);
						}
					}
					break;
					case 1:
					{
						try
						{
							string name;
							name = inputStream.ReadString();
							outputStream = handler.CreateReply();
							SetServerDown(name);
						}
						catch(DotNetOrb.ImR.UnknownServerName ex)
						{
							outputStream = handler.CreateExceptionReply();
							DotNetOrb.ImR.UnknownServerNameHelper.Write(outputStream, ex);
						}
					}
					break;
					case 2:
					{
						try
						{
							string name;
							name = inputStream.ReadString();
							string server;
							server = inputStream.ReadString();
							string host;
							host = inputStream.ReadString();
							uint port;
							port = inputStream.ReadULong();
							outputStream = handler.CreateReply();
							RegisterPoa(name,server,host,port);
						}
						catch(DotNetOrb.ImR.Registration.IllegalPOAName ex)
						{
							outputStream = handler.CreateExceptionReply();
							DotNetOrb.ImR.Registration.IllegalPOANameHelper.Write(outputStream, ex);
						}
						catch(DotNetOrb.ImR.Registration.DuplicatePOAName ex)
						{
							outputStream = handler.CreateExceptionReply();
							DotNetOrb.ImR.Registration.DuplicatePOANameHelper.Write(outputStream, ex);
						}
						catch(DotNetOrb.ImR.UnknownServerName ex)
						{
							outputStream = handler.CreateExceptionReply();
							DotNetOrb.ImR.UnknownServerNameHelper.Write(outputStream, ex);
						}
					}
					break;
					case 3:
					{
							outputStream = handler.CreateReply();
							var _result = GetImrInfo();
							DotNetOrb.ImR.ImRInfoHelper.Write(outputStream, _result);
					}
					break;
				}
				return outputStream;
			}
			else
			{
				throw new CORBA.BadOperation(method + " not found");
			}
		}
	}
}
